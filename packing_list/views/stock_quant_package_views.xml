<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_quant_package_inherit_tree" model="ir.ui.view">
        <field name="name">view.quant.package.inherit.tree</field>
        <field name="model">stock.quant.package</field>
        <field name="inherit_id" ref="stock.view_quant_package_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="inside">
                <field name="sale_ids" string="Sales" widget="open_many2many_tags"/>
                <field name="sales_customer" optional="show"/>
                <field name="carrier_id" optional="show"/>
                <field name="document_ids" widget="open_many2many_tags" optional="show"/>
            </xpath>
        </field>
    </record>

    <record id="view_quant_package_inherit_form" model="ir.ui.view">
        <field name="name">view.quant.package.inherit.form</field>
        <field name="model">stock.quant.package</field>
        <field name="inherit_id" ref="stock.view_quant_package_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']" position="inside">
                <field name="document_ids" invisible="1"/>
                <field name="document_count" invisible="1"/>
                <button name="action_documents"
                        type="object"
                        string="Documents"
                        icon="fa-file-text"
                        attrs="{'invisible': [('document_count', '=', 0)]}"
                        class="oe_stat_button">
                </button>
            </xpath>
            <xpath expr="//group[last()]" position="inside">
                <group attrs="{'invisible': [('sale_ids', '=', [])]}">
                    <field name="sale_ids"
                           widget="open_many2many_tags"
                           string="Sale Orders"/>
                    <field name="sales_customer"/>
                    <field name="carrier_id" attrs="{'invisible': [('carrier_id', '=', False)]}"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="view_quant_package_kanban_inherit_view" model="ir.ui.view">
        <field name="name">view.quant.package.kanban.inherit.view</field>
        <field name="model">stock.quant.package</field>
        <field name="inherit_id" ref="stock.view_quant_package_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="attributes">
                <attribute name="quick_create">false</attribute>
                <attribute name="group_create">false</attribute>
            </xpath>
            <xpath expr="//t[@t-name='kanban-box']" position="before">
                <field name="document_ids"/>
                <field name="sale_ids"/>
                <field name="sales_customer"/>
                <field name="packaging_type"/>
            </xpath>
            <xpath expr="//div[hasclass('o_kanban_record_top')]" position="attributes">
                <attribute name="class" add="d-flex align-items-center justify-content-between" separator=" "/>
            </xpath>
            <xpath expr="//div[hasclass('o_kanban_record_top')]" position="inside">
                <button name="action_documents"
                        type="object"
                        title="Generated"
                        class="btn btn-link py-0 px-1 ml-2"
                        attrs="{'invisible': [('document_ids', '=', [])]}">
                    <i class="fa fa-file"/>
                </button>
                <button title="Not generated"
                        class="btn btn-link py-0 px-1 ml-2"
                        attrs="{'invisible': [('document_ids', '!=', [])]}">
                    <i class="fa fa-file-o"/>
                </button>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_global_click')]" position="inside">
                <div class="row">
                    <div class="col-12" attrs="{'invisible': [('sale_ids', '=', [])]}">
                        <field name="sale_ids" widget="many2many_tags"/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12" attrs="{'invisible': [('sales_customer', '=', False)]}" title="Customer">
                        <i class="fa fa-user px-1"/>
                        <b>Customer:</b>
                        <field name="sales_customer"/>
                    </div>
                    <div class="col-12" attrs="{'invisible': [('carrier_id', '=', False)]}" title="Carrier">
                        <i class="fa fa-truck fa-flip-horizontal px-1"/>
                        <b>Carrier:</b>
                        <field name="carrier_id"/>
                    </div>
                    <div class="col-12" title="Weight">
                        <i class="fa fa-balance-scale"/>
                        <b>Weight:</b>
                        <field name="shipping_weight"/>
                        <field name="weight_uom_name"/>
                    </div>
                    <div class="col-12" attrs="{'invisible': [('packaging_id', '=', False)]}" title="Type">
                        <i class="fa fa-sliders px-1"/>
                        <b>Type:</b>
                        <field name="packaging_id"/>
                    </div>
                    <div class="col-12" attrs="{'invisible': [('quant_ids', '=', [])]}" title="Content">
                        <i class="fa fa-dropbox px-1"/>
                        <b>Content:</b>
                        <field name="quant_ids"/>
                    </div>
                </div>
            </xpath>
        </field>
    </record>

    <record id="view_quant_package_inherit_search" model="ir.ui.view">
        <field name="name"></field>
        <field name="model">stock.quant.package</field>
        <field name="inherit_id" ref="stock.quant_package_search_view"/>
        <field name="arch" type="xml">
            <xpath expr="//group" position="inside">
                <filter string='Packaging Type'
                        name="packaging_type"
                        domain="[]"
                        context="{'group_by' : 'packaging_type'}"/>
                <filter string="Delivery Carrier"
                        name="delivery_carrier"
                        domain="[]"
                        context="{'group_by': 'carrier_id'}"/>
            </xpath>
        </field>
    </record>

</odoo>